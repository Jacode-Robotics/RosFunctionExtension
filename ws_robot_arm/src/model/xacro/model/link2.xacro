<robot name="arm_dyn" xmlns:xacro="http://wiki.ros.org/xacro">

  <xacro:macro name="Link2_create" params="name joint_parent">
    <link name="${name}">
      <visual>
        <geometry>
          <mesh filename="package://model/meshes/Link2.STL" />
        </geometry>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <material name="">  
          <color rgba="0.4 0.4 0.4 1" />
        </material>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://model/meshes/Link2.STL" />
        </geometry>
      </collision>

      <inertial>
          <origin xyz="0.0013842 0.12526 -0.00060222" rpy="0 0 0" />
          <mass value="0.072677" />
          <inertia ixx="0.00022891" ixy="-1.8752E-06" ixz="5.9632E-07" iyy="5.567E-05" iyz="5.7498E-05" izz="0.00022514" />
      </inertial>
    </link>
    
    <joint name="${name}_joint" type="revolute">
      <origin xyz="-0.00013672 0.0015197 0.083559" rpy="1.5708 0 0" />
      <parent link="${joint_parent}" />
      <child link="${name}" />
      <axis xyz="0 0 -1" />
      <limit lower="${joint_lower}" upper="${joint_upper}" effort="${M5210_effort}" velocity="${M5210_velocity}" />
      <dynamics friction="0.1"/>
      <damping friction="0.1"  damping="0.1" />
    </joint>

    <gazebo reference="${name}">
      <material>Gazebo/Grey</material>
    </gazebo>
  </xacro:macro>

</robot>